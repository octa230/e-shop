{"ast":null,"code":"var _jsxFileName = \"/home/octa/Desktop/fullwebsite/frontend/src/screens/OrderScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useReducer } from 'react';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { Store } from '../Store';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport { axios } from 'axios';\nimport { getError } from '../utils';\nimport { Helmet } from 'react-helmet-async';\nimport Col from 'react-bootstrap/esm/Col';\nimport Row from 'react-bootstrap/esm/Row';\nimport ListGroup from 'react-bootstrap/esm/ListGroup';\nimport Card from 'react-bootstrap/esm/Card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state,\n        loading: true,\n        error: ''\n      };\n\n    case 'FETCH_SUCCESS':\n      return { ...state,\n        loading: false,\n        order: action.payload,\n        error: ''\n      };\n\n    case 'FETCH_FAIL':\n      return { ...state,\n        loading: false,\n        error: action.payload\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default function OrderScreen() {\n  _s();\n\n  const {\n    state\n  } = useContext(Store);\n  const {\n    userInfo\n  } = state;\n  const params = useParams();\n  const {\n    id: orderId\n  } = params;\n  const navigate = useNavigate();\n  const [{\n    loading,\n    error,\n    order\n  }, dispatch] = useReducer(reducer, {\n    loading: true,\n    order: {},\n    error: ''\n  });\n  useEffect(() => {\n    const fetchOrder = async () => {\n      try {\n        dispatch({\n          type: 'FETCH_REQUEST'\n        });\n        const {\n          data\n        } = await axios.get(`/api/orders/${orderId}`, {\n          headers: {\n            authorization: `Bearer ${userInfo.token}`\n          }\n        });\n        dispatch({\n          type: 'FETCH_SUCCESS',\n          payload: data\n        });\n      } catch (err) {\n        dispatch({\n          type: 'FETCH_FAIL',\n          payload: getError(err)\n        });\n      }\n    };\n\n    if (!userInfo) {\n      return navigate('/login');\n    }\n\n    if (!order._id || order.id && order._id !== orderId) {\n      fetchOrder();\n    }\n  }, [order, userInfo, orderId, navigate]);\n  return loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this) : error ? /*#__PURE__*/_jsxDEV(MessageBox, {\n    variant: \"danger\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: [\" Order \", orderId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"my-3\",\n      children: \"Order\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 8,\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          className: \"mb-3\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n              children: \"Shipping\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Name:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 25\n              }, this), \" \", order.shippingAddress.fullName, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 80\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Address:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 29\n              }, this), \" \", order.shippingAddress.address, \",\", order.shippingAddress.city, \", \", order.shippingAddress.address, \", ,\", order.shippingAddress.country]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 21\n            }, this), order.isDelivered ? /*#__PURE__*/_jsxDEV(MessageBox, {\n              variant: \"success\",\n              children: [\"Delivered at \", order.deliveredAt]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 25\n            }, this) : /*#__PURE__*/_jsxDEV(MessageBox, {\n              variant: \"danger\",\n              children: \"Not Delivered\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"mb-3\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n              children: \"Payment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Method:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 33\n              }, this), \" \", order.paymentMethod]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 29\n            }, this), order.isPaid ? /*#__PURE__*/_jsxDEV(MessageBox, {\n              variant: \"success\",\n              children: [\"Paid at \", order.paidAt]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(MessageBox, {\n              variant: \"danger\",\n              children: \"Not Paid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"mb-3\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: /*#__PURE__*/_jsxDEV(Card.Title, {\n              children: /*#__PURE__*/_jsxDEV(ListGroup, {\n                variant: \"flush\",\n                children: order.orderItems.map(item => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                  children: /*#__PURE__*/_jsxDEV(Row, {\n                    className: \"align-items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(Col, {\n                      md: 6,\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: item.image,\n                        alt: item.name,\n                        className: \"img-fluid rounded img-thumbnail cart_image\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 127,\n                        columnNumber: 41\n                      }, this), ' ', /*#__PURE__*/_jsxDEV(Link, {\n                        to: `/product/${item.slug}`,\n                        children: item.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 128,\n                        columnNumber: 41\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(Col, {\n                      md: 3,\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: item.quantity\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 131,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 130,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(Col, {\n                      md: 3,\n                      children: [\"AED \", item.price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 133,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 41\n                  }, this)\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 37\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"mb-3\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n              children: \"Order Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n              variant: \"flush\",\n              children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"Items\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: [\"AED \", order.itemsPrice.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 32\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 31\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"Shipping\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 35\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: [\"AED\", order.shippingPrice.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 35\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 31\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"Tax\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 35\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: [\"AED\", order.taxPrice.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 35\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 31\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Order Total\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 168,\n                      columnNumber: 35\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 35\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [\"AED\", order.taxPrice.toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 35\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 35\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n\n_s(OrderScreen, \"Ifyb2lguoPKYpAeM6Zxnw83GBAs=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = OrderScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderScreen\");","map":{"version":3,"sources":["/home/octa/Desktop/fullwebsite/frontend/src/screens/OrderScreen.js"],"names":["React","useContext","useEffect","useReducer","LoadingBox","MessageBox","Store","useNavigate","useParams","Link","axios","getError","Helmet","Col","Row","ListGroup","Card","reducer","state","action","type","loading","error","order","payload","OrderScreen","userInfo","params","id","orderId","navigate","dispatch","fetchOrder","data","get","headers","authorization","token","err","_id","shippingAddress","fullName","address","city","country","isDelivered","deliveredAt","paymentMethod","isPaid","paidAt","orderItems","map","item","image","name","slug","quantity","price","itemsPrice","toFixed","shippingPrice","taxPrice"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useReducer } from 'react'\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox'\nimport { Store } from '../Store';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport { axios } from 'axios';\nimport { getError } from '../utils';\nimport { Helmet } from 'react-helmet-async';\nimport Col from 'react-bootstrap/esm/Col';\nimport Row from 'react-bootstrap/esm/Row';\nimport ListGroup from 'react-bootstrap/esm/ListGroup';\nimport Card from 'react-bootstrap/esm/Card';\n\n\nfunction reducer(state, action) {\n    switch (action.type) {        \n            case 'FETCH_REQUEST':\n                return{...state, loading: true, error: ''};\n                case 'FETCH_SUCCESS':\n                    return {...state, loading: false, order: action.payload, error: ''};\n                    case 'FETCH_FAIL':\n                        return {...state, loading: false, error: action.payload};\n\n            default:\n                return state;\n                        \n\n    }\n}\n\nexport default function OrderScreen() {\n\n    const { state } = useContext(Store);\n    const { userInfo } = state;\n\n    const params = useParams();\n    const { id: orderId } = params;\n    const navigate = useNavigate();\n\n    const [{loading, error, order}, dispatch] = useReducer(reducer, {\n        loading: true,\n        order: {},\n        error: '',\n    });\n\n    useEffect(() => {\n        const fetchOrder = async () =>{\n            try {\n                dispatch({type: 'FETCH_REQUEST'});\n                const { data } = await axios.get (`/api/orders/${orderId}`,{\n                    headers: {authorization: `Bearer ${userInfo.token}`},\n                });\n                dispatch({type: 'FETCH_SUCCESS', payload:data });\n\n            }catch(err){\n                dispatch({type: 'FETCH_FAIL', payload: getError(err) })\n            }\n        };\n\n        if (!userInfo) {\n            return navigate('/login');\n        }\n        if (\n            !order._id || \n            (order.id && order._id !== orderId)){\n            fetchOrder();\n        }\n    }, [order, userInfo, orderId, navigate]);\n\n  return loading ? (\n\n    <LoadingBox></LoadingBox> \n    ) : error ? \n    (\n        <MessageBox variant='danger'>{error}</MessageBox>\n    ): (\n        <div>\n            <Helmet>\n            <title> Order {orderId}</title>\n            </Helmet>\n            <h1 className='my-3'>Order</h1>\n            <Row>\n                <Col md={8}>\n                <Card className='mb-3'>\n                <Card.Body>\n                    <Card.Title>Shipping</Card.Title>\n                    <Card.Text>\n                        <strong>Name:</strong> {order.shippingAddress.fullName}<br />\n                            <strong>Address:</strong> {order.shippingAddress.address},\n                            {order.shippingAddress.city}, {order.shippingAddress.address},\n                            ,{order.shippingAddress.country}\n                    </Card.Text>\n                    {order.isDelivered ? (\n                        <MessageBox variant='success'>\n                            Delivered at {order.deliveredAt}\n                        </MessageBox>\n                    ) : (\n                        <MessageBox variant='danger'>Not Delivered</MessageBox>\n                    )}\n                </Card.Body>\n                </Card>\n                <Card className='mb-3'>\n                    <Card.Body>\n                        <Card.Title>Payment</Card.Title>\n                            <Card.Text>\n                                <strong>Method:</strong> {order.paymentMethod}\n                </Card.Text>\n\n                {order.isPaid ? (\n                  <MessageBox variant=\"success\">\n                    Paid at {order.paidAt}\n                  </MessageBox>\n                ) : (\n                  <MessageBox variant=\"danger\">Not Paid</MessageBox>\n                )}\n              </Card.Body>\n                </Card>\n                <Card className='mb-3'>\n                    <Card.Body>\n                        <Card.Title>\n                            <ListGroup variant=\"flush\">\n                                {order.orderItems.map((item) => (\n                                    <ListGroup.Item key={item.id}>\n                                        <Row className =\"align-items-center\">\n                                        <Col md={6}>\n                                        <img src={item.image} alt={item.name} className='img-fluid rounded img-thumbnail cart_image'></img>{' '}\n                                        <Link to={`/product/${item.slug}`}>{item.name}</Link>\n                                        </Col>\n                                        <Col md={3}> \n                                        <span>{item.quantity}</span>\n                                        </Col>\n                                        <Col md={3}>AED {item.price}</Col>                                                                                \n                                        </Row>\n                                    </ListGroup.Item>\n                                ))}\n                            </ListGroup>\n                        </Card.Title>\n                    </Card.Body>\n                </Card>\n                </Col>\n                <Col md={4}>\n                  <Card className='mb-3'>\n                    <Card.Body>\n                      <Card.Title>Order Summary</Card.Title>\n                            <ListGroup variant='flush'>\n                              <ListGroup.Item>\n                               <Row>\n                                    <Col>Items</Col>\n                                    <Col>AED {order.itemsPrice.toFixed(2)}</Col>\n                               </Row>     \n                              </ListGroup.Item>\n                              <ListGroup.Item>\n                                <Row>\n                                  <Col>Shipping</Col>\n                                  <Col>AED{order.shippingPrice.toFixed(2)}</Col>\n                                </Row>\n                              </ListGroup.Item>\n                              <ListGroup.Item>\n                                <Row>\n                                  <Col>Tax</Col>\n                                  <Col>AED{order.taxPrice.toFixed(2)}</Col>\n                                </Row>\n                              </ListGroup.Item>\n                              <ListGroup.Item>\n                                <Row>\n                                  <Col>\n                                  <strong>Order Total</strong>\n                                  </Col>\n                                  <Col>\n                                  <strong>AED{order.taxPrice.toFixed(2)}</strong>\n                                  </Col>\n                                </Row>\n                              </ListGroup.Item>\n                              \n                            </ListGroup>\n                  </Card.Body>\n                </Card>\n                </Col>\n\n\n            </Row>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}