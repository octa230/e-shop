{"ast":null,"code":"var _jsxFileName = \"/home/octa/Desktop/fullwebsite/frontend/src/screens/ProfileScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useReducer, useState } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport Form from 'react-bootstrap/Form';\nimport { Button } from '@mui/material';\nimport { Store } from '../Store';\nimport { toast } from 'react-toastify';\nimport { getError } from '../utils';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'UPDATE_REQUEST':\n      return { ...state,\n        loadingUpdate: true\n      };\n\n    case 'UPDATE_SUCCESS':\n      return { ...state,\n        loadingUpdate: false\n      };\n\n    case 'UPDATE_FAIL':\n      return { ...state,\n        loadingUpdate: false\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default function ProfileScreen() {\n  _s();\n\n  const {\n    state,\n    dispatch: ctxDispatch\n  } = useContext(Store);\n  const {\n    userInfo\n  } = state;\n  const [name, setName] = useState(userInfo.name);\n  const [email, setEmail] = useState(userInfo.email);\n  const [password, setPassword] = useState('');\n  const [confirmpassword, setConfirmPassword] = useState('');\n  const [{\n    loadingUpdate\n  }, dispatch] = useReducer(reducer, {\n    loadingUpdate: false\n  });\n\n  const submitHandler = async () => {\n    e.preventDefault();\n\n    try {\n      const {\n        data\n      } = await axios.put('/api/users/profile', {\n        name,\n        email,\n        password\n      }, {\n        headers: {\n          Authorization: `Bearer ${userInfo.token}`\n        }\n      });\n      dispatch({\n        type: 'UPDATE_SUCCESS'\n      });\n      ctxDispatch({\n        type: 'USER_SIGNIN',\n        payload: data\n      });\n      localStorage.setItem('userInfo', JSON.stringify(data));\n      toast.success('User updated successfully');\n    } catch (err) {\n      dispatch({\n        type: 'FETCH_FAIL'\n      });\n      toast.error(getError(err));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container small-container\",\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: \"User Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"my-3\",\n      children: \"User Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"m-3\",\n        control: \"name\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          value: name,\n          onChange: e => setName(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"m-3\",\n        control: \"email\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"m-3\",\n        control: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          onChange: e => setPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"m-3\",\n        control: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Confirm Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          onChange: e => setConfirmPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"outlined\",\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProfileScreen, \"qnAIe2m0Aw2Ap2MXdITHITR8KU4=\");\n\n_c = ProfileScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileScreen\");","map":{"version":3,"sources":["/home/octa/Desktop/fullwebsite/frontend/src/screens/ProfileScreen.js"],"names":["React","useContext","useReducer","useState","Helmet","Form","Button","Store","toast","getError","axios","reducer","state","action","type","loadingUpdate","ProfileScreen","dispatch","ctxDispatch","userInfo","name","setName","email","setEmail","password","setPassword","confirmpassword","setConfirmPassword","submitHandler","e","preventDefault","data","put","headers","Authorization","token","payload","localStorage","setItem","JSON","stringify","success","err","error","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useReducer, useState } from 'react'\nimport { Helmet } from 'react-helmet-async';\nimport Form from 'react-bootstrap/Form'\nimport { Button } from '@mui/material';\nimport { Store } from '../Store';\nimport { toast } from 'react-toastify';\nimport { getError } from '../utils';\nimport axios from 'axios';\n\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case 'UPDATE_REQUEST':\n            return {...state, loadingUpdate: true };\n        case 'UPDATE_SUCCESS': \n         return {...state, loadingUpdate: false};\n        case 'UPDATE_FAIL':\n            return{...state, loadingUpdate: false}\n\n        default:\n            return state;\n    }\n};\n\nexport default function ProfileScreen() {\n\n    const{state, dispatch: ctxDispatch } = useContext(Store);\n    const {userInfo } = state;\n    const [name, setName] = useState(userInfo.name);\n    const [email, setEmail] = useState(userInfo.email);\n    const [password, setPassword] = useState('');\n    const [confirmpassword, setConfirmPassword] = useState('');\n\n\n    const [{loadingUpdate}, dispatch] = useReducer(reducer, {\n        loadingUpdate:false,\n    })\n\n    const submitHandler = async () => {\n        e.preventDefault();\n        try{\n            const {data} = await axios.put(\n                '/api/users/profile',\n                {\n                    name,\n                    email,\n                    password,\n                },\n                {\n                    headers: {Authorization: `Bearer ${userInfo.token}`},\n                }\n            );\n            dispatch({\n                type: 'UPDATE_SUCCESS',\n            });\n            ctxDispatch({type: 'USER_SIGNIN', payload: data });\n            localStorage.setItem('userInfo', JSON.stringify(data));\n            toast.success('User updated successfully');\n            \n        }catch(err){\n                dispatch({\n                    type: 'FETCH_FAIL',\n                })\n\n                toast.error(getError(err))\n            }\n        }\n \n\n\n  return (\n    <div className='container small-container'>\n        <Helmet>User Profile</Helmet>\n\n        <h1 className='my-3'>User Profile</h1>\n        <form onSubmit={submitHandler}>\n            <Form.Group className='m-3' control='name'>\n                <Form.Label>Name</Form.Label>\n                <Form.Control value={name} onChange={(e) => setName(e.target.value)} required/>\n            </Form.Group>\n\n            <Form.Group className='m-3' control='email'>\n                <Form.Label>Email</Form.Label>\n                <Form.Control value={email} onChange={(e) => setEmail(e.target.value)} required/>\n            </Form.Group>\n\n            <Form.Group className='m-3' control='password'>\n                <Form.Label>Password</Form.Label>\n                <Form.Control type='password' onChange={(e) => setPassword(e.target.value)} required/>\n            </Form.Group>\n\n            <Form.Group className='m-3' control='password'>\n                <Form.Label>Confirm Password</Form.Label>\n                <Form.Control type='password' onChange={(e) => setConfirmPassword(e.target.value)} required/>\n            </Form.Group>\n\n            <div className='mb-3'>\n                <Button type='submit' variant='outlined'>Update</Button>\n\n            </div>\n\n        </form>\n      \n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}