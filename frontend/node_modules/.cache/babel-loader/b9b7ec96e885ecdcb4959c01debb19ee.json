{"ast":null,"code":"import _slicedToArray from\"/home/octa/e-shop/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/home/octa/e-shop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/octa/e-shop/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{createContext,useReducer}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var Store=/*#__PURE__*/createContext();var initialState={userInfo:localStorage.getItem('userInfo')?JSON.parse(localStorage.getItem('userInfo')):null,cart:{shippingAddress:localStorage.getItem('shippingAddress')?JSON.parse(localStorage.getItem('shippingAddress')):{},paymentMethod:localStorage.getItem('paymentMethod')?localStorage.getItem('paymentMethod'):'',cartItems:localStorage.getItem('cartItems')?JSON.parse(localStorage.getItem('cartItems')):[]}};function reducer(state,action){switch(action.type){case'CART_ADD_ITEM'://ADD TO CART\nvar newItem=action.payload;var existItem=state.cart.cartItems.find(function(item){return item._id===newItem._id;});var cartItems=existItem?state.cart.cartItems.map(function(item){return item._id===existItem._id?newItem:item;}):[].concat(_toConsumableArray(state.cart.cartItems),[newItem]);localStorage.setItem('cartItems',JSON.stringify(cartItems));return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{cartItems:cartItems})});case'CART_REMOVE_ITEM':{var _cartItems=state.cart.cartItems.filter(function(item){return item._id!==action.payload._id;});localStorage.setItem('cartItems',JSON.stringify(_cartItems));return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{cartItems:_cartItems})});}case'CART_CLEAR':return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{cartItems:[]})});case'USER_SIGNIN':return _objectSpread(_objectSpread({},state),{},{userInfo:action.payload});case'USER_SIGNOUT':return _objectSpread(_objectSpread({},state),{},{userInfo:null,cart:{cartItems:[],shippingAddress:{},paymentMethod:''}});case'SAVE_SHIPPING_ADDRESS':return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{shippingAddress:action.payload})});case'SAVE_PAYMENT_METHOD':return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{paymentMethod:action.payload})});default:return state;}}export function StoreProvider(props){var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var value={state:state,dispatch:dispatch};return/*#__PURE__*/_jsx(Store.Provider,{value:value,children:props.children});}","map":{"version":3,"sources":["/home/octa/e-shop/frontend/src/Store.js"],"names":["createContext","useReducer","Store","initialState","userInfo","localStorage","getItem","JSON","parse","cart","shippingAddress","paymentMethod","cartItems","reducer","state","action","type","newItem","payload","existItem","find","item","_id","map","setItem","stringify","filter","StoreProvider","props","dispatch","value","children"],"mappings":"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","sourcesContent":["import { createContext, useReducer } from \"react\";\n\nexport const Store = createContext();\nconst initialState ={\n\n    userInfo: localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')): null,\n\n    cart: {\n        shippingAddress: localStorage.getItem('shippingAddress') \n        ? JSON.parse(localStorage.getItem('shippingAddress')) \n        : {},\n\n        paymentMethod: localStorage.getItem('paymentMethod')\n        ? localStorage.getItem('paymentMethod') : '',\n        \n        cartItems: localStorage.getItem('cartItems') \n        ? JSON.parse(localStorage.getItem('cartItems')) \n        :[],\n    },\n};\n\nfunction reducer(state, action) {\n    switch(action.type){\n        case 'CART_ADD_ITEM':\n            //ADD TO CART\n\n            const newItem = action.payload;\n            const existItem = state.cart.cartItems.find(\n                (item) => item._id === newItem._id\n            );\n\n            const cartItems = existItem \n            ? state.cart.cartItems.map((item) => \n            item._id === existItem._id \n            ? newItem: item) : [...state.cart.cartItems, newItem];\n\n            localStorage.setItem('cartItems', JSON.stringify(cartItems));\n\n            return {...state, cart: {...state.cart, cartItems }};\n            case 'CART_REMOVE_ITEM': {\n                const cartItems = state.cart.cartItems.filter(\n                    (item) => item._id !== action.payload._id\n                );\n\n                localStorage.setItem('cartItems', JSON.stringify(cartItems));\n                return {...state, cart: {...state.cart, cartItems }};\n            }\n            case 'CART_CLEAR':\n                return{...state, cart:{...state.cart, cartItems: [] } };\n                \n            case 'USER_SIGNIN':\n                return { ...state, userInfo: action.payload };\n\n            case 'USER_SIGNOUT': \n            return{\n                ...state,\n                userInfo: null,\n                cart:{\n                    cartItems:[],\n                    shippingAddress:{},\n                    paymentMethod: '',\n                },\n            };\n            case 'SAVE_SHIPPING_ADDRESS':\n                return {\n                    ...state,\n                    cart: {\n                        ...state.cart,\n                        shippingAddress: action.payload,\n                    }\n                }\n            case 'SAVE_PAYMENT_METHOD':\n                return{\n                    ...state,\n                    cart: {...state.cart, paymentMethod: action.payload },\n                }    \n \n        default:\n            return state;\n    }\n}\n\n\nexport function StoreProvider(props) {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const value = { state, dispatch};\n    return <Store.Provider value={value}>{props.children}</Store.Provider>\n}"]},"metadata":{},"sourceType":"module"}