{"ast":null,"code":"import _objectSpread from\"/home/octa/e-shop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/octa/e-shop/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/octa/e-shop/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{useContext}from\"react\";import{Store}from\"../Store\";import{Helmet}from'react-helmet-async';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import MessageBox from'../components/MessageBox';import ListGroup from'react-bootstrap/ListGroup';import Button from'react-bootstrap/Button';import Card from'react-bootstrap/Card';import{Link,useNavigate}from'react-router-dom';import ListGroupItem from\"react-bootstrap/esm/ListGroupItem\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert('Sorry. Product is out of stock');return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkoutHandler=function checkoutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart_Container\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,sm:12,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is Empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Shopping\"})]}):/*#__PURE__*/_jsx(ListGroup,{cart_group:true,children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-Items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail cart_image\"}),' ',/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},variant:\"light\",disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),' ',/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),' ',/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},variant:\"light\",disabled:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\"$ \",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return removeItemHandler(item);},variant:\"light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id);})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"subtotal (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\" items): AED-\",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"primary\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Proceed To Checkout\"})})})]})})})})]})]});}","map":{"version":3,"sources":["/home/octa/e-shop/frontend/src/screens/CartScreen.js"],"names":["useContext","Store","Helmet","Row","Col","MessageBox","ListGroup","Button","Card","Link","useNavigate","ListGroupItem","axios","CartScreen","navigate","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","length","map","image","name","slug","price","reduce","a","c"],"mappings":"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","sourcesContent":["import { useContext } from \"react\";\nimport { Store } from \"../Store\";\nimport {Helmet} from 'react-helmet-async'\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport MessageBox from '../components/MessageBox';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport { Link, useNavigate } from 'react-router-dom';\nimport ListGroupItem from \"react-bootstrap/esm/ListGroupItem\";\nimport axios  from \"axios\";\n\n\nexport default function CartScreen(){\n    const navigate = useNavigate();\n    const { state, dispatch: ctxDispatch } = useContext(Store);\n\n    const {\n        cart: { cartItems },\n    } = state;\n\n\n    const updateCartHandler = async(item, quantity) =>{\n        const { data } = await axios.get(`/api/products/${item._id}`);\n        if(data.countInStock < quantity) {\n            window.alert('Sorry. Product is out of stock');\n            return;\n          }\n    \n    \n          ctxDispatch({\n            type: 'CART_ADD_ITEM', \n            payload: {...item, quantity },\n          });\n    }\n    \n    const removeItemHandler =(item) =>{\n        ctxDispatch({type: 'CART_REMOVE_ITEM', payload: item});\n    }\n\n    const checkoutHandler = () => {\n        navigate('/signin?redirect=/shipping');\n    }\n\n    return (\n        <div className=\"cart_Container\">\n            <Helmet>\n                <title>Shopping Cart</title>\n            </Helmet>\n            <h1>Shopping Cart</h1>\n            <Row>\n                <Col md ={8} sm={12}>\n                    {cartItems.length === 0 ? (\n                        <MessageBox>\n                            Cart is Empty. <Link to ='/'>Go Shopping</Link>\n                        </MessageBox>\n                    ):(\n                        <ListGroup cart_group>\n                            {cartItems.map((item) => (\n                                <ListGroup.Item key={item._id}>\n                                    <Row className=\"align-Items-center\">\n                                        <Col md={4}>\n                                            <img \n                                            src={item.image}\n                                            alt={item.name}\n                                            className = \"img-fluid rounded img-thumbnail cart_image\">\n                                            </img>{' '}\n                                            <Link to = {`/product/${item.slug}`}>{item.name}</Link>\n                                        </Col>\n                                        <Col md ={3}>\n                                            <Button onClick={() => updateCartHandler(item, item.quantity -1)} variant =\"light\" disabled={item.quantity === 1}>\n                                                <i className=\"fas fa-minus-circle\"></i>\n                                            </Button>{' '}\n                                            <span>{item.quantity}</span>{' '}\n                                            <Button onClick={() => updateCartHandler(item, item.quantity +1)} variant =\"light\" disabled={item.quantity === item.countInStock}>\n                                                <i className=\"fas fa-plus-circle\"></i>\n                                            </Button>\n                                        </Col>\n                                        <Col md={3}>$ {item.price}</Col>\n                                        <Col md={2}>\n                                        <Button onClick={() => removeItemHandler(item)} \n                                                variant =\"light\">\n                                                <i className=\"fas fa-trash\"></i>\n                                            </Button>\n                                        </Col>\n                                    </Row>\n                                </ListGroup.Item>\n                            ))}\n                        </ListGroup>\n                    )}\n                </Col>\n                <Col md = {4}>\n                    <Card>\n                        <Card.Body>\n                            <ListGroup variant=\"flush\">\n                                <ListGroup.Item>\n                                    <h3>\n                                    subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)}{' '} items): AED- \n                                    {cartItems.reduce((a, c) => a + c.price * c.quantity, 0)}\n                                </h3>\n                                </ListGroup.Item>\n                                <ListGroup.Item>\n                                    <div className=\"d-grid\">\n                                        <Button\n                                        type=\"button\"\n                                        variant=\"primary\"\n                                        onClick={checkoutHandler}\n                                        disabled ={cartItems.length === 0}\n                                        >Proceed To Checkout</Button>\n                                    </div>\n                                </ListGroup.Item>\n                            </ListGroup>\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n\n        </div>\n    )\n\n}"]},"metadata":{},"sourceType":"module"}